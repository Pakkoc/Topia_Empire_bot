# <a:sd:1462495939058208960> Forge 화폐 규칙 <a:sd:1462495961178701834>

> ## <a:DH_MINA_04:1462813052138291282> 개요 및 목적
> ```- 토피 획득량을 증가/감소시키는 보너스 규칙 설정
> - 특정 시간대, 채널, 역할에 배율 적용
> - 특정 채널/역할에서 토피 획득 차단```

---

> ## 1단계: 핫타임 설정
> ### <a:DH_MINA_03:1462813029577130200> 핫타임 개념
> * 특정 시간대에 토피 획득량을 증가시키는 보너스
> * 활발한 활동 시간대를 유도하는 용도로 활용
> <a:DH_MINA_03:1462813029577130200> 예: 저녁 8시~11시에 2배 토피

> ### <a:DH_MINA_03:1462813029577130200> 핫타임 설정 항목
> * **type**: 적용 대상 (text/voice/all)
> * **startTime / endTime**: 시작/종료 시간 (HH:MM)
> * **multiplier**: 토피 배율 (0~10)
> * **channelIds**: 적용 채널 목록 (미선택 시 전체 적용)
> * **enabled**: 활성화 여부
> ```예시:
> - 유형: 전체
> - 시간: 20:00 ~ 23:00
> - 배율: 2x```

> ### <a:DH_MINA_03:1462813029577130200> 채널 선택 규칙
> * 음성 유형 선택 시 → 음성 채널만 표시
> * 텍스트 유형 선택 시 → 텍스트 채널만 표시
> * 전체 유형 선택 시 → 모든 채널 표시
> <a:DH_MINA_03:1462813029577130200> 미선택 시 모든 채널에 적용

---

> ## 2단계: 배율 설정
> ### <a:DH_MINA_03:1462813029577130200> 배율 개념
> * 특정 채널이나 역할에 상시 토피 보너스 적용
> * 역할/채널 구분 없이 가장 높은 배율이 적용됨
> <a:DH_MINA_03:1462813029577130200> 배율 범위: 0~10

> ### <a:DH_MINA_03:1462813029577130200> 채널별 배율
> * 특정 채널에서 토피 획득 시 배율 적용
> * 텍스트/음성 채널 모두 설정 가능
> ```활용 예:
> - #자유채팅 채널: 1.5x
> - 🔊일반 음성방: 2x```

> ### <a:DH_MINA_03:1462813029577130200> 역할별 배율
> * 특정 역할을 가진 유저에게 배율 적용
> * 상점에서 VIP 역할 구매 시 혜택으로 활용 가능
> ```활용 예:
> - @VIP 역할: 2x
> - @부스터 역할: 1.5x```

> ### <a:DH_MINA_03:1462813029577130200> 배율 관리 기능
> * **추가**: 채널/역할 선택 후 배율 값 지정
> * **수정**: 기존 배율 값 직접 수정 가능
> * **삭제**: 개별 배율 설정 삭제 가능
> <a:DH_MINA_03:1462813029577130200> 복수 선택으로 여러 채널/역할 동시 추가 가능

---

> ## 3단계: 토피 차단 설정
> ### <a:DH_MINA_03:1462813029577130200> 토피 차단 개념
> * 특정 채널이나 역할에서 토피 획득을 완전히 차단
> * 봇 명령어 채널, 경고자 역할 등에 활용
> <a:DH_MINA_03:1462813029577130200> 차단된 대상은 토피를 전혀 받지 못함

> ### <a:DH_MINA_03:1462813029577130200> 채널 차단
> * 지정된 채널에서는 토피 획득 불가
> * 텍스트/음성 채널 모두 설정 가능
> ```활용 예:
> - #봇명령어 채널
> - #도배방```

> ### <a:DH_MINA_03:1462813029577130200> 역할 차단
> * 지정된 역할을 가진 유저는 토피 획득 불가
> * 패널티 용도로 활용 가능
> ```활용 예:
> - @경고자 역할
> - @뮤트 역할```

> ### <a:DH_MINA_03:1462813029577130200> 차단 관리 기능
> * **추가**: 채널/역할 복수 선택 후 일괄 추가
> * **삭제**: 개별 차단 설정 삭제 가능
> <a:DH_MINA_03:1462813029577130200> 이미 등록된 채널/역할은 선택 목록에서 제외됨

---

> ## 4단계: 봇 동작 (자동 처리)
> ### <a:DH_MINA_03:1462813029577130200> 토피 지급 시 규칙 적용
> * 메시지/음성 활동 감지 시 규칙 자동 적용
> * 차단 → 배율 → 핫타임 순서로 처리
> ```처리 흐름:
> 1. 차단 규칙 확인 (채널/역할)
> 2. 차단 대상이면 토피 미지급
> 3. 배율 확인 (채널/역할 중 최대값)
> 4. 핫타임 확인 (현재 시간 기준)
> 5. 최종 토피 = 기본 토피 × 배율 × 핫타임```

> ### <a:DH_MINA_03:1462813029577130200> 차단 우선순위
> * 차단 설정이 배율보다 우선 적용
> * 차단된 채널/역할은 배율이 있어도 토피 미지급
> <a:DH_MINA_03:1462813029577130200> 역할 차단이 채널 배율보다 우선

> ### <a:DH_MINA_03:1462813029577130200> 배율 중첩 규칙
> * 채널 배율과 역할 배율 중 **가장 높은 값**만 적용
> * 핫타임 배율은 채널/역할 배율과 **곱연산**으로 중첩
> ```예시:
> - 채널 배율 1.5x, 역할 배율 2x → 2x 적용
> - 위 상태에서 핫타임 1.5x → 2x × 1.5x = 3x```

> ### <a:DH_MINA_03:1462813029577130200> 핫타임 적용 로직
> * 현재 시간이 핫타임 범위 내인지 확인
> * 채널 지정 시 해당 채널에서만 핫타임 적용
> * 자정을 넘어가는 시간대도 지원 (예: 22:00~02:00)
> <a:DH_MINA_03:1462813029577130200> 서버 시간대(한국 시간) 기준으로 판단

---

> ## <a:DH_MINA_05:1462814742178693160> 주의사항 및 제약
> ### 1. 배율 중복
> <a:DH_MINA_03:1462813029577130200> 여러 배율이 적용 가능한 경우 가장 높은 배율만 적용
> ### 2. 차단 우선순위
> <a:DH_MINA_03:1462813029577130200> 차단 설정이 배율보다 우선 (차단되면 배율 무시)
> ### 3. 핫타임 + 배율
> <a:DH_MINA_03:1462813029577130200> 핫타임과 채널/역할 배율은 곱연산으로 중첩 가능
> ### 4. 화폐명 연동
> <a:DH_MINA_03:1462813029577130200> 화폐 설정에서 지정한 토피 이름이 UI에 자동 반영됨

---

> ### <a:DH_MINA_13:1462814948127146005> 요약
> - 1. **핫타임**: 특정 시간대에 토피 배율 증가
> - 2. **채널 배율**: 특정 채널에서 토피 보너스 적용
> - 3. **역할 배율**: 특정 역할에 토피 보너스 적용 (VIP 혜택)
> - 4. **채널 차단**: 특정 채널에서 토피 획득 차단
> - 5. **역할 차단**: 특정 역할에 토피 획득 패널티 적용
> - 6. **자동 처리**: 봇이 메시지/음성 활동 시 규칙 자동 적용
> - 7. **배율 계산**: 채널/역할 중 최대값 × 핫타임 곱연산
